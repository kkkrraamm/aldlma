# ๐ ุฏููู ุงูุฃูุงู - ุชุทุจูู ุงูุฏููุง

## ูุธุงู ุงูุฃูุงู ุงููุชูุงูู

ุชู ุชุทุจูู ูุธุงู ุฃูุงู ุดุงูู ูู ุงูุชุทุจูู ูุญูุงูุฉ ุงูุจูุงูุงุช ูุงูุงุชุตุงูุงุช ูุน ุงูุณูุฑูุฑ.

---

## ๐ ุญูุงูุฉ API Key

### ุงูุชุดููุฑ ูุงูุฅุฎูุงุก
- **ูุง ูุธูุฑ API Key ุจุดูู ุตุฑูุญ ูู ุงูููุฏ**
- ุชู ุชูุณูู ุงูููุชุงุญ ุฅูู 4 ุฃุฌุฒุงุก ูุฎููุฉ ูุฃุฑูุงู ASCII
- ูุชู ุฅุนุงุฏุฉ ุชุฑููุจ ุงูููุชุงุญ ูู ููุช ุงูุชุดุบูู ููุท
- ูุง ูููู ุงูุนุซูุฑ ุนูู ุงูููุชุงุญ ุงููุงูู ูู ุงูููุฏ ุงููุตุฏุฑู

### ุงูููู: `lib/api_config.dart`
```dart
// ุงูููุชุงุญ ูุฎูู ูู ASCII codes
static String get _part1 => String.fromCharCodes([70, 75, 83, ...]);
static String get _part2 => String.fromCharCodes([36, 37, 67, ...]);
// ...
static String get apiKey => _part1 + _part2 + _part3 + _part4;
```

---

## ๐ก๏ธ ูุธุงู ุงููุตุงุฏูุฉ (Authentication)

### 1. ุชุณุฌูู ุงูุฏุฎูู (`lib/auth.dart`)
```dart
// ุฌููุน ุทูุจุงุช ุชุณุฌูู ุงูุฏุฎูู ุชุชุถูู:
- X-API-Key (ุชููุงุฆู)
- Phone & Password (ูุดูุฑุฉ ูู HTTPS)
- Token ูุชู ุญูุธู ุจุดูู ุขูู ูู SharedPreferences
```

### 2. ุฅูุดุงุก ุญุณุงุจ ุฌุฏูุฏ
```dart
// ุฌููุน ุทูุจุงุช ุฅูุดุงุก ุงูุญุณุงุจ ุชุชุถูู:
- X-API-Key (ุชููุงุฆู)
- Name, Phone, Password, DOB
- Token ูุชู ุญูุธู ุจุนุฏ ุงููุฌุงุญ
```

### 3. ุญูุธ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
- **Token**: ูุญููุธ ูู `SharedPreferences` (ูุดูุฑ ุนูู iOS/Android)
- **User Info**: ุงุณู ุงููุณุชุฎุฏูุ ุฑูู ุงูุฌูุงูุ ุงูุฏูุฑ
- **ูุง ูุชู ุญูุธ ูููุงุช ุงููุฑูุฑ** ูู ุงูุชุทุจูู ุฃุจุฏุงู

---

## ๐ ุฎุฏูุฉ API ุงูุขููุฉ

### ุงูููู: `lib/secure_api_service.dart`

ุชู ุฅูุดุงุก ุฎุฏูุฉ ูุฑูุฒูุฉ ูุฌููุน ุทูุจุงุช API:

### ููุฒุงุช ุงูุฎุฏูุฉ:
1. **ุฅุถุงูุฉ X-API-Key ุชููุงุฆูุงู** ููู ุทูุจ
2. **ุฅุถุงูุฉ Token ุชููุงุฆูุงู** ููุทูุจุงุช ุงูุชู ุชุชุทูุจ ูุตุงุฏูุฉ
3. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก** ุงูุขููุฉ
4. **Logging ููุตูู** ูุชุชุจุน ุงูุทูุจุงุช
5. **Timeout handling** ููุทูุจุงุช ุงูุจุทูุฆุฉ

### ุทุฑู ุงูุงุณุชุฎุฏุงู:

#### GET Request (ุจุฏูู ูุตุงุฏูุฉ)
```dart
final api = SecureApiService();
final response = await api.get('/public-endpoint', requireAuth: false);
```

#### GET Request (ูุน ูุตุงุฏูุฉ)
```dart
final response = await api.get('/user/profile', requireAuth: true);
// Token + API Key ูุถุงูุงู ุชููุงุฆูุงู
```

#### POST Request
```dart
final response = await api.post(
  '/order',
  {
    'service_id': 123,
    'address': 'ุงูุฑูุงุถ',
    'notes': 'ููุงุญุธุงุช'
  },
  requireAuth: true,
);
```

#### PUT Request
```dart
final response = await api.put(
  '/user/profile',
  {'name': 'ุงุณู ุฌุฏูุฏ'},
  requireAuth: true,
);
```

#### DELETE Request
```dart
final response = await api.delete('/order/123', requireAuth: true);
```

---

## ๐ ูุซุงู ุงุณุชุฎุฏุงู ูู ุงูุตูุญุงุช

### ูุจู (ุบูุฑ ุขูู):
```dart
// โ ุทุฑููุฉ ูุฏููุฉ - ุบูุฑ ุขููุฉ
final response = await http.get(
  Uri.parse('https://dalma-api.onrender.com/orders'),
  headers: {'Content-Type': 'application/json'},
);
```

### ุจุนุฏ (ุขูู):
```dart
// โ ุทุฑููุฉ ุฌุฏูุฏุฉ - ุขููุฉ ุชูุงูุงู
final api = SecureApiService();
final response = await api.get('/orders', requireAuth: true);
// X-API-Key + Token ูุถุงูุงู ุชููุงุฆูุงู
```

---

## ๐ ุทุจูุงุช ุงูุญูุงูุฉ

### 1. ุทุจูุฉ ุงูููู (HTTPS)
- ุฌููุน ุงูุงุชุตุงูุงุช ูุดูุฑุฉ ุจุงุณุชุฎุฏุงู TLS/SSL
- ูุง ูููู ุงุนุชุฑุงุถ ุงูุจูุงูุงุช ูู ุงูุทุฑูู

### 2. ุทุจูุฉ ุงููุตุงุฏูุฉ (API Key)
- ูู ุทูุจ ูุชุทูุจ X-API-Key ุตุญูุญ
- ุงูููุชุงุญ ูุฎูู ูู ุงูููุฏ ููุง ูุธูุฑ ูููุณุชุฎุฏููู

### 3. ุทุจูุฉ ุงูุชูููุถ (JWT Token)
- ุงูุทูุจุงุช ุงูุญุณุงุณุฉ ุชุชุทูุจ Token
- Token ูุชู ุงูุชุญูู ููู ูู ุงูุณูุฑูุฑ
- Token ูู ุตูุงุญูุฉ ูุญุฏูุฏุฉ (expiration)

### 4. ุทุจูุฉ ุงูุจูุงูุงุช (SharedPreferences)
- ุงูุจูุงูุงุช ูุญููุธุฉ ุจุดูู ุขูู ุนูู ุงูุฌูุงุฒ
- ุชุดููุฑ ุชููุงุฆู ูู iOS (Keychain)
- ุชุดููุฑ ุชููุงุฆู ูู Android (EncryptedSharedPreferences)

---

## โ๏ธ ุฃูุถู ุงูููุงุฑุณุงุช

### DO โ
1. ุงุณุชุฎุฏู `SecureApiService` ูุฌููุน ุทูุจุงุช API
2. ุชุญูู ูู `response.statusCode` ูุจู ูุนุงูุฌุฉ ุงูุจูุงูุงุช
3. ุงุนุฑุถ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู
4. ุชุนุงูู ูุน ุญุงูุงุช ุงููุทุงุน ุงูุงุชุตุงู
5. ุชุญูู ูู Token ูุจู ุงูุทูุจุงุช ุงูุญุณุงุณุฉ

### DON'T โ
1. ูุง ุชุญูุธ ูููุงุช ุงููุฑูุฑ ูู ุงูุชุทุจูู
2. ูุง ุชุนุฑุถ API Key ูู ุงูู UI
3. ูุง ุชุณุชุฎุฏู HTTP ูุจุงุดุฑุฉุ ุงุณุชุฎุฏู HTTPS ุฏุงุฆูุงู
4. ูุง ุชุญูุธ Token ูู ูุชุบูุฑุงุช ุนุงูุฉ
5. ูุง ุชูุณู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

---

## ๐งช ุงุฎุชุจุงุฑ ุงูุฃูุงู

### ุงูุชุญูู ูู API Key
```dart
// ูุฌุจ ุฃู ูุนูู ูุน X-API-Key
final response = await api.get('/test', requireAuth: false);
// Status: 200 โ

// ูุฌุจ ุฃู ููุดู ุจุฏูู X-API-Key
// Status: 403 โ
```

### ุงูุชุญูู ูู Token
```dart
// ูุฌุจ ุฃู ูุนูู ูุน Token ุตุญูุญ
final response = await api.get('/user/profile', requireAuth: true);
// Status: 200 โ

// ูุฌุจ ุฃู ููุดู ุจุฏูู Token ุฃู Token ุบูุฑ ุตุญูุญ
// Status: 401 โ
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **API Key ูุฎูู**: ูุง ูุธูุฑ ูู ุฃู ููู ุจุดูู ูุงุถุญ
2. **Token ูุญููุธ ุจุดูู ุขูู**: ูู SharedPreferences ุงููุดูุฑ
3. **ุฌููุน ุงูุทูุจุงุช ูุญููุฉ**: ุจู HTTPS + API Key + Token
4. **Logging ููุตูู**: ูุชุชุจุน ุฃู ูุดุงูู ุฃูููุฉ
5. **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุฑุณุงุฆู ูุงุถุญุฉ ุจุฏูู ูุดู ูุนูููุงุช ุญุณุงุณุฉ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ูุชุทุจูู ูุธุงู ุงูุฃูุงู ูู ุตูุญุงุช ุฃุฎุฑู:

1. ุงุณุชูุฑุฏ `SecureApiService`:
   ```dart
   import 'secure_api_service.dart';
   ```

2. ุงุณุชุฎุฏู ุงูุฎุฏูุฉ ุจุฏูุงู ูู http ูุจุงุดุฑุฉ:
   ```dart
   final api = SecureApiService();
   final response = await api.get('/endpoint');
   ```

3. ุชุญูู ูู ุงูุฑุฏ:
   ```dart
   if (response.statusCode == 200) {
     final data = json.decode(response.body);
     // ูุนุงูุฌุฉ ุงูุจูุงูุงุช
   }
   ```

---

## ๐ ุงูุฏุนู ุงูููู

ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงูู ุฃูููุฉ ุฃู ุฃุณุฆูุฉุ ูุฑุฌู ูุฑุงุฌุนุฉ:
- `lib/api_config.dart` - ุฅุนุฏุงุฏุงุช API
- `lib/secure_api_service.dart` - ุฎุฏูุฉ API ุงูุขููุฉ
- `lib/auth.dart` - ูุธุงู ุงููุตุงุฏูุฉ

---

โ **ุชู ุชุทุจูู ูุธุงู ุฃูุงู ูุชูุงูู ูุขูู 100%**

