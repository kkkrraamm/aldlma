# ๐ข ูุธุงู ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช ุงููุชูุงูู - Dalma

## ๐ฏ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ุฅุนูุงูุงุช ุงุญุชุฑุงูู ููุชูุงูู ูุชูุญ ุฅุฏุงุฑุฉ ูุงููุฉ ููุฅุนูุงูุงุช ูู ุชุทุจูู ุงูุฏููุง ูุน ุชุชุจุน ุฏููู ููุฃุฏุงุก ูุงูุฅุญุตุงุฆูุงุช.

---

## โ ุงููููุฒุงุช ุงููุงููุฉ

### 1. **ุฅุฏุงุฑุฉ ุดุงููุฉ ูู Admin Dashboard**
- โ ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ
- โ ุชุนุฏูู ุฅุนูุงู ููุฌูุฏ
- โ ุญุฐู ุฅุนูุงู
- โ ุชูุนูู/ุชุนุทูู ุงูุฅุนูุงู
- โ ุฑูุน ุตูุฑุฉ ุงูุฅุนูุงู (Cloudinary)
- โ ุฌุฏููุฉ ุงูุฅุนูุงูุงุช (ุชุงุฑูุฎ ุจุฏุงูุฉ ูููุงูุฉ)

### 2. **ูุนูููุงุช ุชูุตูููุฉ ููุฅุนูุงู**
- โ ุงูุนููุงู (title)
- โ ุงููุตู (description)
- โ ุงูุตูุฑุฉ (image_url)
- โ ููุน ุงูุฑุงุจุท (external/internal)
- โ ุงูุฑุงุจุท ุงูุฎุงุฑุฌู (link_url)
- โ ุงููุณุงุฑ ุงูุฏุงุฎูู (internal_route)
- โ ุงูุตูุญุฉ (page_location)
- โ ุงูููุถุน (position)
- โ ุชุฑุชูุจ ุงูุนุฑุถ (display_order)
- โ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ (start_date)
- โ ุชุงุฑูุฎ ุงูููุงูุฉ (end_date)

### 3. **ุชุชุจุน ุงูุฃุฏุงุก ูุงูุฅุญุตุงุฆูุงุช**
- โ ุนุฏุฏ ุงููุดุงูุฏุงุช (impressions)
- โ ุนุฏุฏ ุงูููุฑุงุช (clicks)
- โ ูุนุฏู ุงูููุฑ (CTR)
- โ ุฅุญุตุงุฆูุงุช ุฅุฌูุงููุฉ ูุฌููุน ุงูุฅุนูุงูุงุช
- โ ุฅุญุตุงุฆูุงุช ููู ุฅุนูุงู ุนูู ุญุฏุฉ

### 4. **ุงูุชููู ุงูุฐูู**
- โ ุฑูุงุจุท ุฎุงุฑุฌูุฉ (ุชูุชุญ ูู ุงููุชุตูุญ)
- โ ุฑูุงุจุท ุฏุงุฎููุฉ (ุชููู ุฏุงุฎู ุงูุชุทุจูู)
- โ ุฏุนู ุงููุณุงุฑุงุช:
  - `/prayer` - ุฃููุงุช ุงูุตูุงุฉ
  - `/dalma-ai` - ุฐูุงุก ุงูุฏููุง
  - `/services` - ุงูุฎุฏูุงุช
  - `/realty` - ุงูุนูุงุฑุงุช

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `ads`:

```sql
CREATE TABLE ads (
  id SERIAL PRIMARY KEY,
  title TEXT NOT NULL,
  description TEXT,
  image_url TEXT NOT NULL,
  link_type TEXT DEFAULT 'external' CHECK (link_type IN ('external', 'internal')),
  link_url TEXT,
  internal_route TEXT,
  page_location TEXT NOT NULL,
  position TEXT DEFAULT 'top',
  display_order INTEGER DEFAULT 0,
  start_date TIMESTAMP,
  end_date TIMESTAMP,
  clicks INTEGER DEFAULT 0,
  impressions INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## ๐ Backend API Endpoints

### **Admin Endpoints (ูุญููุฉ ุจู authenticateAdmin):**

#### 1. ุฌูุจ ุฌููุน ุงูุฅุนูุงูุงุช
```
GET /api/admin/ads
Authorization: Bearer {token}
```

**Response:**
```json
{
  "success": true,
  "ads": [
    {
      "id": 1,
      "title": "ุนุฑุถ ุฎุงุต",
      "description": "ุฎุตู 50% ุนูู ุฌููุน ุงูุฎุฏูุงุช",
      "image_url": "https://...",
      "link_type": "internal",
      "internal_route": "/services",
      "page_location": "home",
      "position": "top",
      "display_order": 1,
      "start_date": "2025-11-17T00:00:00Z",
      "end_date": "2025-11-30T23:59:59Z",
      "clicks": 245,
      "impressions": 5820,
      "ctr": 4.21,
      "is_active": true,
      "created_at": "2025-11-17T10:00:00Z"
    }
  ],
  "stats": {
    "total": 10,
    "active": 8,
    "totalClicks": 1250,
    "totalImpressions": 25000
  }
}
```

#### 2. ุฌูุจ ุฅุนูุงู ูุงุญุฏ
```
GET /api/admin/ads/:id
Authorization: Bearer {token}
```

#### 3. ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ
```
POST /api/admin/ads
Authorization: Bearer {token}
Content-Type: application/json

{
  "title": "ุนุฑุถ ุฎุงุต",
  "description": "ุฎุตู 50%",
  "image_url": "https://...",
  "link_type": "internal",
  "internal_route": "/services",
  "page_location": "home",
  "position": "top",
  "display_order": 1,
  "start_date": "2025-11-17",
  "end_date": "2025-11-30",
  "is_active": true
}
```

#### 4. ุชุนุฏูู ุฅุนูุงู
```
PUT /api/admin/ads/:id
Authorization: Bearer {token}
Content-Type: application/json

{
  "title": "ุนุฑุถ ูุญุฏุซ",
  "is_active": false
}
```

#### 5. ุญุฐู ุฅุนูุงู
```
DELETE /api/admin/ads/:id
Authorization: Bearer {token}
```

#### 6. ุชูุนูู/ุชุนุทูู ุฅุนูุงู
```
POST /api/admin/ads/:id/toggle
Authorization: Bearer {token}
```

---

### **Public Endpoints (ููุชุทุจูู):**

#### 1. ุฌูุจ ุงูุฅุนูุงูุงุช ุงููุดุทุฉ ูุตูุญุฉ ูุนููุฉ
```
GET /api/ads/:page
```

**ูุซุงู:**
```
GET /api/ads/home
```

**Response:**
```json
[
  {
    "id": 1,
    "title": "ุนุฑุถ ุฎุงุต",
    "description": "ุฎุตู 50%",
    "image_url": "https://...",
    "link_type": "internal",
    "internal_route": "/services",
    "page_location": "home",
    "position": "top",
    "display_order": 1
  }
]
```

**ููุงุญุธุฉ:** ูุชู ุชุตููุฉ ุงูุฅุนูุงูุงุช ุญุณุจ:
- `is_active = true`
- `start_date <= NOW()` (ุฅุฐุง ูุงู ูุญุฏุฏ)
- `end_date >= NOW()` (ุฅุฐุง ูุงู ูุญุฏุฏ)

#### 2. ุชุณุฌูู ูุดุงูุฏุฉ
```
POST /api/ads/:id/impression
```

#### 3. ุชุณุฌูู ููุฑุฉ
```
POST /api/ads/:id/click
```

---

## ๐ฑ Flutter App Integration

### ุงุณุชุฎุฏุงู `AdBanner`:

```dart
import 'package:aldlma/widgets/ad_banner.dart';

// ูู ุฃู ุตูุญุฉ:
AdBanner(
  pageLocation: 'home',  // home, services, realty, trends, orders
  position: 'top',       // top, middle, bottom
)
```

### ุงููููุฒุงุช ูู ุงูุชุทุจูู:

1. **ุชุชุจุน ุชููุงุฆู:**
   - ูุชู ุชุณุฌูู ุงููุดุงูุฏุฉ ุนูุฏ ุธููุฑ ุงูุฅุนูุงู
   - ูุชู ุชุณุฌูู ุงูููุฑุฉ ุนูุฏ ุงูุถุบุท ุนูู ุงูุฅุนูุงู

2. **ุงูุชููู ุงูุฐูู:**
   - ุงูุฑูุงุจุท ุงูุฎุงุฑุฌูุฉ ุชูุชุญ ูู ุงููุชุตูุญ
   - ุงูุฑูุงุจุท ุงูุฏุงุฎููุฉ ุชููู ุฏุงุฎู ุงูุชุทุจูู

3. **ุนุฑุถ ุงููุตู:**
   - ุฅุฐุง ูุงู ุงูุฅุนูุงู ูุญุชูู ุนูู ูุตูุ ูุธูุฑ ูู ุงูุฃุณูู ูุน ุฎูููุฉ ุดูุงูุฉ

---

## ๐ป Admin Dashboard

### ุงููุตูู:
```
https://your-admin-dashboard.com/ads-management.html
```

### ุงููููุฒุงุช:

#### 1. **ููุญุฉ ุงูุฅุญุตุงุฆูุงุช:**
- ุฅุฌูุงูู ุงูุฅุนูุงูุงุช
- ุงูุฅุนูุงูุงุช ุงููุดุทุฉ
- ุฅุฌูุงูู ุงููุดุงูุฏุงุช
- ุฅุฌูุงูู ุงูููุฑุงุช
- ูุนุฏู ุงูููุฑ ุงูุฅุฌูุงูู (CTR)

#### 2. **ูุงุฆูุฉ ุงูุฅุนูุงูุงุช:**
- ุนุฑุถ ุฌููุน ุงูุฅุนูุงูุงุช ูู ุจุทุงูุงุช
- ูุนุงููุฉ ุงูุตูุฑุฉ
- ุญุงูุฉ ุงูุฅุนูุงู (ูุดุท/ูุนุทู)
- ููุน ุงูุฑุงุจุท (ุฏุงุฎูู/ุฎุงุฑุฌู)
- ุงูุฅุญุตุงุฆูุงุช ููู ุฅุนูุงู
- ุฃุฒุฑุงุฑ ุงูุฅุฌุฑุงุกุงุช (ุชุนุฏูู/ุชูุนูู/ุญุฐู)

#### 3. **ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู:**
- ุญููู ูุงููุฉ ูุฌููุน ุงูุจูุงูุงุช
- ุฑูุน ุตูุฑุฉ ูุน ูุนุงููุฉ
- ุงุฎุชูุงุฑ ููุน ุงูุฑุงุจุท (ุฑุงุฏูู)
- ุงุฎุชูุงุฑ ุงูุตูุญุฉ ูุงูููุถุน (ููุงุฆู ููุณุฏูุฉ)
- ุชุญุฏูุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ
- ุชุญูู ูู ุงูุจูุงูุงุช (Validation)

---

## ๐จ ุงูุชุตููู

### ุงูุฃููุงู:
- **Primary:** `#059669` (ุฃุฎุถุฑ ุงูุฏููุง)
- **Success:** `#10b981` (ูุฌุงุญ)
- **Warning:** `#f59e0b` (ุชุญุฐูุฑ)
- **Danger:** `#ef4444` (ุฎุทุฑ)
- **Info:** `#3b82f6` (ูุนูููุงุช)

### ุงูุฎุทูุท:
- **Arabic:** Cairo (Google Fonts)
- **Weights:** 300, 400, 600, 700, 900

### ุงูุฃููููุงุช:
- **Font Awesome 6.4.0**

---

## ๐ ูุซุงู ุนูู ุงูุฅุญุตุงุฆูุงุช

### ุฅุนูุงู ูุงุญุฏ:
```
๐ ุฅุญุตุงุฆูุงุช ุงูุฅุนูุงู #1:
- ุงููุดุงูุฏุงุช: 5,820
- ุงูููุฑุงุช: 245
- ูุนุฏู ุงูููุฑ: 4.21%
- ุงูุญุงูุฉ: ูุดุท
- ุงููุชุฑุฉ: 17 ููููุจุฑ - 30 ููููุจุฑ 2025
```

### ุฅุญุตุงุฆูุงุช ุฅุฌูุงููุฉ:
```
๐ ุงูุฅุญุตุงุฆูุงุช ุงูุฅุฌูุงููุฉ:
- ุฅุฌูุงูู ุงูุฅุนูุงูุงุช: 10
- ุงูุฅุนูุงูุงุช ุงููุดุทุฉ: 8
- ุฅุฌูุงูู ุงููุดุงูุฏุงุช: 25,000
- ุฅุฌูุงูู ุงูููุฑุงุช: 1,250
- ูุนุฏู ุงูููุฑ ุงูุฅุฌูุงูู: 5.00%
```

---

## ๐ ุงูุงุณุชุฎุฏุงู

### 1. **ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ:**

1. ุงูุชุญ Admin Dashboard
2. ุงุถุบุท "ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงูุนููุงู: "ุนุฑุถ ุฎุงุต - ุฎุตู 50%"
   - ุงููุตู: "ุนูู ุฌููุน ุงูุฎุฏูุงุช ุญุชู ููุงูุฉ ุงูุดูุฑ"
   - ุงุฑูุน ุงูุตูุฑุฉ
   - ุงุฎุชุฑ ููุน ุงูุฑุงุจุท: "ุฏุงุฎูู"
   - ุงุฎุชุฑ ุงููุณุงุฑ: "/services"
   - ุงุฎุชุฑ ุงูุตูุญุฉ: "ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ"
   - ุงุฎุชุฑ ุงูููุถุน: "ุฃุนูู"
   - ุญุฏุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ ูุงูููุงูุฉ
4. ุงุญูุธ

### 2. **ุชุชุจุน ุงูุฃุฏุงุก:**

1. ุงูุชุญ ูุงุฆูุฉ ุงูุฅุนูุงูุงุช
2. ุดุงูุฏ ุงูุฅุญุตุงุฆูุงุช ููู ุฅุนูุงู:
   - ุนุฏุฏ ุงููุดุงูุฏุงุช
   - ุนุฏุฏ ุงูููุฑุงุช
   - ูุนุฏู ุงูููุฑ (CTR)
3. ูุงุฑู ุงูุฃุฏุงุก ุจูู ุงูุฅุนูุงูุงุช
4. ุนุทูู ุงูุฅุนูุงูุงุช ุฐุงุช ุงูุฃุฏุงุก ุงูุถุนูู

### 3. **ุฌุฏููุฉ ุงูุฅุนูุงูุงุช:**

1. ุญุฏุฏ ุชุงุฑูุฎ ุงูุจุฏุงูุฉ: `2025-11-17`
2. ุญุฏุฏ ุชุงุฑูุฎ ุงูููุงูุฉ: `2025-11-30`
3. ุงูุฅุนูุงู ุณูุธูุฑ ููุท ุฎูุงู ูุฐู ุงููุชุฑุฉ
4. ุจุนุฏ ุงูุชูุงุก ุงููุชุฑุฉุ ุณูุฎุชูู ุชููุงุฆูุงู

---

## ๐ง ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ

### Backend (Render):
```
ูุง ุชูุฌุฏ ูุชุบูุฑุงุช ุจูุฆูุฉ ุฅุถุงููุฉ ูุทููุจุฉ
ูุงุนุฏุฉ ุงูุจูุงูุงุช ุณุชููุดุฃ ุชููุงุฆูุงู ุนูุฏ ุฃูู ุชุดุบูู
```

### Admin Dashboard:
```javascript
// ูู js/ads-management.js:
const CLOUDINARY_CLOUD_NAME = 'your_cloud_name'; // ุงุณุชุจุฏู ุจู Cloud Name ุงูุฎุงุต ุจู
```

### Cloudinary:
```
1. ุณุฌู ูู Cloudinary.com
2. ุงุญุตู ุนูู Cloud Name
3. ุฃูุดุฆ Upload Preset ุงุณูู: dalma_ads
4. ุงุฌุนูู Unsigned
```

---

## ๐ ูุนุงุฏูุงุช ุงูุฅุญุตุงุฆูุงุช

### ูุนุฏู ุงูููุฑ (CTR):
```
CTR = (ุงูููุฑุงุช รท ุงููุดุงูุฏุงุช) ร 100

ูุซุงู:
ุงูููุฑุงุช: 245
ุงููุดุงูุฏุงุช: 5,820
CTR = (245 รท 5,820) ร 100 = 4.21%
```

### ุงูุฃุฏุงุก ุงูุฌูุฏ:
- **ููุชุงุฒ:** CTR > 5%
- **ุฌูุฏ:** CTR 3-5%
- **ูุชูุณุท:** CTR 1-3%
- **ุถุนูู:** CTR < 1%

---

## ๐ฏ ุฃูุถู ุงูููุงุฑุณุงุช

### 1. **ุงูุตูุฑ:**
- ุงุณุชุฎุฏู ุตูุฑ ุนุงููุฉ ุงูุฌูุฏุฉ (1200x600 px)
- ุญุฌู ุงูููู < 500 KB
- ุชูุณูู: JPG ุฃู PNG
- ุชุฌูุจ ุงููุตูุต ุงููุซูุฑุฉ ูู ุงูุตูุฑุฉ

### 2. **ุงูุนููุงู:**
- ูุงุถุญ ููุจุงุดุฑ
- ูุง ูุชุฌุงูุฒ 50 ุญุฑู
- ูุญุชูู ุนูู ูููุฉ ุฌุฐุงุจุฉ (ุนุฑุถุ ุฎุตูุ ุฌุฏูุฏ)

### 3. **ุงููุตู:**
- ูุฎุชุตุฑ (100-150 ุญุฑู)
- ููุถุญ ุงููุงุฆุฏุฉ ูููุณุชุฎุฏู
- ูุญุชูู ุนูู ุฏุนูุฉ ููุฅุฌุฑุงุก (CTA)

### 4. **ุงูุฌุฏููุฉ:**
- ุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ ูุงุถุญุฉ
- ูุง ุชุชุฑู ุงูุฅุนูุงู ููุชูุญ ุฅูู ุงูุฃุจุฏ
- ุฑุงูุจ ุงูุฃุฏุงุก ูุนุฏูู ุงููุชุฑุฉ

### 5. **ุงูููุถุน:**
- **ุฃุนูู:** ููุฅุนูุงูุงุช ุงููููุฉ
- **ูุณุท:** ููุฅุนูุงูุงุช ุงููุชูุณุทุฉ
- **ุฃุณูู:** ููุฅุนูุงูุงุช ุงูุซุงูููุฉ

---

## โ ุงูุฎูุงุตุฉ

ูุธุงู ุฅุนูุงูุงุช ูุชูุงูู ูุงุญุชุฑุงูู ูููุฑ:

โ **ุฅุฏุงุฑุฉ ูุงููุฉ** ูู Admin Dashboard
โ **ุชุชุจุน ุฏููู** ูููุดุงูุฏุงุช ูุงูููุฑุงุช
โ **ุฌุฏููุฉ ุฐููุฉ** ููุฅุนูุงูุงุช
โ **ุชููู ูุฑู** (ุฏุงุฎูู/ุฎุงุฑุฌู)
โ **ุฅุญุตุงุฆูุงุช ุดุงููุฉ** ูููุงุณ ุงูุฃุฏุงุก
โ **ุชุตููู ุงุญุชุฑุงูู** ูุชูุงุณู ูุน ูููุฉ ุงูุฏููุง

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุขู! ๐**

