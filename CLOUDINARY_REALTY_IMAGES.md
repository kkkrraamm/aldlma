# â˜ï¸ ØªØ­Ø¯ÙŠØ« Ù†Ø¸Ø§Ù… Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª - Cloudinary

## ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„ØªØ­Ø¯ÙŠØ«

ØªÙ… ØªØ­Ø¯ÙŠØ« Ù†Ø¸Ø§Ù… Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ù„ÙŠØ³ØªØ®Ø¯Ù… **Cloudinary** Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† imgbbØŒ Ø¨Ù†ÙØ³ Ø·Ø±ÙŠÙ‚Ø© Ø±ÙØ¹ ØµÙˆØ± Ø§Ù„Ø£ÙØ§ØªØ§Ø± (ØµÙˆØ± Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†).

---

## âœ… Ù…Ø§ ØªÙ… ØªØ¹Ø¯ÙŠÙ„Ù‡

### 1. Frontend - Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙƒØ§ØªØ¨

#### Ù…Ù„Ù: `dalma-office-portal/js/add-listing.js`
```javascript
async function uploadImage(file) {
    // Ø§Ù„Ø¢Ù† ÙŠØ³ØªØ®Ø¯Ù…: POST /api/office/upload-listing-image
    // Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†: imgbb API
    
    const response = await fetch(`${API_URL}/api/office/upload-listing-image`, {
        method: 'POST',
        headers: {
            'Authorization': `Bearer ${token}`
        },
        body: formData
    });
}
```

#### Ù…Ù„Ù: `dalma-office-portal/js/edit-listing.js`
```javascript
async function uploadImageToImgbb(file) {
    // ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡Ø§ Ù„ØªØ³ØªØ®Ø¯Ù… Cloudinary Ø£ÙŠØ¶Ø§Ù‹
    // Ù†ÙØ³ Ø§Ù„Ù€ endpoint: POST /api/office/upload-listing-image
}
```

### 2. Backend - API

#### Ù…Ù„Ù: `dalma-api/index.js`

**Endpoint Ø¬Ø¯ÙŠØ¯:**
```javascript
POST /api/office/upload-listing-image
```

**Ø§Ù„ÙˆØ¸ÙŠÙØ©:**
- ÙŠØ³ØªÙ‚Ø¨Ù„ ØµÙˆØ±Ø© Ù…Ù† Ø§Ù„Ù…ÙƒØªØ¨
- ÙŠØ±ÙØ¹Ù‡Ø§ Ø¹Ù„Ù‰ Cloudinary ÙÙŠ Ù…Ø¬Ù„Ø¯ `dalma/realty_listings`
- ÙŠØ·Ø¨Ù‚ ØªØ­Ø³ÙŠÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
  - Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø­Ø¬Ù…: 1200Ã—800 Ø¨ÙƒØ³Ù„
  - Ø§Ù„Ø¬ÙˆØ¯Ø©: ØªÙ„Ù‚Ø§Ø¦ÙŠØ© (auto:good)
- ÙŠÙØ±Ø¬Ø¹ URL Ø§Ù„ØµÙˆØ±Ø©

**Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:**
- âœ… ÙŠØ³ØªØ®Ø¯Ù… Ù†ÙØ³ Ø­Ø³Ø§Ø¨ Cloudinary Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯
- âœ… ÙŠØ­ÙØ¸ Ø§Ù„ØµÙˆØ± ÙÙŠ Ù…Ø¬Ù„Ø¯ Ù…Ù†ÙØµÙ„ Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
- âœ… ÙŠØ·Ø¨Ù‚ ØªØ­Ø³ÙŠÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù„Ù„Ø£Ø¯Ø§Ø¡
- âœ… ÙŠØªØ·Ù„Ø¨ Authentication (token Ø§Ù„Ù…ÙƒØªØ¨)

---

## ğŸ“Š Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙˆØ§Ù„Ø¬Ø¯ÙŠØ¯

| Ø§Ù„Ù…ÙŠØ²Ø© | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ… (imgbb) | Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ (Cloudinary) |
|--------|----------------------|---------------------------|
| **API Key** | âŒ Ù…ÙØªØ§Ø­ ÙˆÙ‡Ù…ÙŠ (YOUR_API_KEY) | âœ… Ù…ÙØ¹Ø¯ ÙˆÙŠØ¹Ù…Ù„ |
| **Ø§Ù„ØªØ®Ø²ÙŠÙ†** | âŒ Base64 (fallback) | âœ… URLs Ø­Ù‚ÙŠÙ‚ÙŠØ© |
| **Ø§Ù„Ø£Ø¯Ø§Ø¡** | âŒ Ø¨Ø·ÙŠØ¡ ÙˆØ«Ù‚ÙŠÙ„ | âœ… Ø³Ø±ÙŠØ¹ Ù…Ø¹ CDN |
| **Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚ÙŠØ©** | âš ï¸ Ù‚Ø¯ ÙŠÙØ´Ù„ | âœ… Ù…ÙˆØ«ÙˆÙ‚ 99.9% |
| **Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ** | âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ | âœ… Ø¬ÙˆØ¯Ø© ÙˆØ­Ø¬Ù… ØªÙ„Ù‚Ø§Ø¦ÙŠ |
| **Ø§Ù„Ø£Ù…Ø§Ù†** | âš ï¸ ÙŠØªØ·Ù„Ø¨ API key Ø¹Ø§Ù… | âœ… Ù…Ø­Ù…ÙŠ Ø¨Ù€ token |

---

## ğŸ—‚ï¸ ØªÙ†Ø¸ÙŠÙ… Ø§Ù„ØµÙˆØ± Ø¹Ù„Ù‰ Cloudinary

```
dalma/
â”œâ”€â”€ profile_pictures/     â† ØµÙˆØ± Ø§Ù„Ø£ÙØ§ØªØ§Ø± (Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†)
â””â”€â”€ realty_listings/      â† ØµÙˆØ± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª (Ø¬Ø¯ÙŠØ¯)
```

---

## ğŸš€ Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø­Ø°Ù Ø§Ù„ØµÙˆØ± Base64 Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© âš ï¸

Ø§ÙØªØ­ pgAdmin ÙˆÙ†ÙØ°:

```sql
-- Ø¹Ø±Ø¶ Ø¹Ø¯Ø¯ Ø§Ù„ØµÙˆØ± Base64
SELECT COUNT(*) as base64_images_count
FROM realty_listing_images
WHERE url LIKE 'data:image/%';

-- Ø­Ø°Ù Ø§Ù„ØµÙˆØ± Base64
DELETE FROM realty_listing_images
WHERE url LIKE 'data:image/%';
```

Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø¬Ø§Ù‡Ø²:
```bash
psql -U postgres -d dalma -f DELETE_BASE64_IMAGES.sql
```

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ù€ API

```bash
cd dalma-api
npm start
```

ØªØ­Ù‚Ù‚ Ù…Ù† Ø¸Ù‡ÙˆØ±:
```
âœ… Cloudinary configured successfully
```

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ø®ØªØ¨Ø§Ø± Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©

1. Ø§ÙØªØ­ Ø¨ÙˆØ§Ø¨Ø© Ø§Ù„Ù…ÙƒØ§ØªØ¨
2. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ "Ø¥Ø¶Ø§ÙØ© Ø¹Ù‚Ø§Ø±"
3. Ø§Ø®ØªØ± ØµÙˆØ±Ø©
4. Ø±Ø§Ù‚Ø¨ Console:
   ```
   â˜ï¸ [CLOUDINARY] Ø±ÙØ¹ ØµÙˆØ±Ø© Ø¹Ù‚Ø§Ø±: image.jpg
   âœ… [CLOUDINARY] ØªÙ… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©: https://res.cloudinary.com/...
   ```

### Ø§Ù„Ø®Ø·ÙˆØ© 4: Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

Ø§ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Dalma:
1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Ù‚Ø³Ù… Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª
2. Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø±
3. Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø¹Ù„Ø§Ù…Ø© (marker) ÙÙŠ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
4. ÙŠØ¬Ø¨ Ø£Ù† ØªØ¸Ù‡Ø± Ø§Ù„ØµÙˆØ±Ø©! âœ¨

---

## ğŸ” Ø§Ø³ØªÙƒØ´Ø§Ù Ø§Ù„Ø£Ø®Ø·Ø§Ø¡

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù„Ø§ ØªØ¸Ù‡Ø± Ø§Ù„ØµÙˆØ± ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

**Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„:** ØµÙˆØ± Base64 Ù„Ø§ ØªØ²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø©

**Ø§Ù„Ø­Ù„:**
```sql
DELETE FROM realty_listing_images WHERE url LIKE 'data:image/%';
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©

**Ø§Ù„Ø³Ø¨Ø¨ Ø§Ù„Ù…Ø­ØªÙ…Ù„:** Cloudinary ØºÙŠØ± Ù…ÙØ¹Ø¯

**Ø§Ù„ØªØ­Ù‚Ù‚:**
```bash
# ÙÙŠ terminal Ø§Ù„Ù€ API
echo $CLOUDINARY_CLOUD_NAME
echo $CLOUDINARY_API_KEY
echo $CLOUDINARY_API_SECRET
```

**Ø§Ù„Ø­Ù„:** Ø±Ø§Ø¬Ø¹ Ù…Ù„Ù `.env` ÙˆØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯:
```env
CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„ØµÙˆØ± ÙƒØ¨ÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹

**Ø§Ù„Ø­Ù„:** Cloudinary ÙŠØ·Ø¨Ù‚ ØªØ­Ø³ÙŠÙ†Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©:
- Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰: 1200Ã—800 Ø¨ÙƒØ³Ù„
- Ø§Ù„Ø¬ÙˆØ¯Ø©: auto:good
- Ø§Ù„ØªÙ†Ø³ÙŠÙ‚: ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (WebP Ù„Ù„Ù…ØªØµÙØ­Ø§Øª Ø§Ù„Ø­Ø¯ÙŠØ«Ø©)

---

## ğŸ“ˆ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ÙˆØ§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©

### Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Cloudinary

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: https://cloudinary.com/console
2. ØªØ­Ù‚Ù‚ Ù…Ù†:
   - **Storage:** Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©
   - **Bandwidth:** Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„ØªØ±Ø¯Ø¯ÙŠ
   - **Transformations:** Ø¹Ø¯Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª

### Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠ

- âœ… **Storage:** 25 GB
- âœ… **Bandwidth:** 25 GB/Ø´Ù‡Ø±
- âœ… **Transformations:** 25,000/Ø´Ù‡Ø±

---

## ğŸ¯ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### Ù‚Ø¨Ù„ Ø§Ù„ØªØ­Ø¯ÙŠØ« âŒ
- Ø§Ù„ØµÙˆØ± Ù…Ø®Ø²Ù†Ø© ÙƒÙ€ Base64
- Ø­Ø¬Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ¨ÙŠØ±
- Ø¨Ø·Ø¡ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„
- Ù„Ø§ ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### Ø¨Ø¹Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ« âœ…
- Ø§Ù„ØµÙˆØ± Ø¹Ù„Ù‰ Cloudinary
- URLs Ø®ÙÙŠÙØ© ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- Ø³Ø±ÙŠØ¹Ø© Ù…Ø¹ CDN
- ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙˆØ§Ù„Ù…ÙˆÙ‚Ø¹
- ØªØ­Ø³ÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø¬ÙˆØ¯Ø© ÙˆØ§Ù„Ø­Ø¬Ù…

---

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©

1. **Ù„Ø§ ØªØ­Ø°Ù Ø§Ù„ØµÙˆØ± Base64 Ù‚Ø¨Ù„ Ø¥Ø¹Ø§Ø¯Ø© Ø±ÙØ¹Ù‡Ø§**
   - Ø§Ø­Ø°ÙÙ‡Ø§ ÙÙ‚Ø· Ø¨Ø¹Ø¯ Ø±ÙØ¹ ØµÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©

2. **Ø§Ù„Ù†Ø³Ø® Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠ**
   - Ù‚Ù… Ø¨Ø¹Ù…Ù„ backup Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø­Ø°Ù:
   ```bash
   pg_dump -U postgres dalma > backup_before_delete.sql
   ```

3. **Ø§Ù„ØµÙˆØ± Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©**
   - ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§Ø­ØªÙØ§Ø¸ Ø¨Ù‡Ø§ ÙÙŠ Ù…Ø¬Ù„Ø¯ Ù…Ù†ÙØµÙ„
   - Ø£Ùˆ Ø­Ø°ÙÙ‡Ø§ Ø¨Ø¹Ø¯ Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯

---

## ğŸ”— Ø±ÙˆØ§Ø¨Ø· Ù…ÙÙŠØ¯Ø©

- [Cloudinary Dashboard](https://cloudinary.com/console)
- [Cloudinary Documentation](https://cloudinary.com/documentation)
- [Image Transformations Guide](https://cloudinary.com/documentation/image_transformations)

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ­Ø¯ÙŠØ«:** 13 Ù†ÙˆÙÙ…Ø¨Ø± 2025  
**Ø§Ù„Ø­Ø§Ù„Ø©:** âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±:** 2.0


