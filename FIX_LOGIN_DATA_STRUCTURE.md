# ๐ง ุฅุตูุงุญ ูุดููุฉ ุจููุฉ ุงูุจูุงูุงุช ูู ุชุณุฌูู ุงูุฏุฎูู

## ๐ฏ ุงููุดููุฉ

**ุงูุฃุนุฑุงุถ:**
- ุงูุณูุฑูุฑ ูููู: "โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ"
- ุงูุชุทุจูู ูููู: "ุฑูู ุงูุฌูุงู ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ"

**ุงูุณุจุจ:**
- ุงูุณูุฑูุฑ ูุฑุณู ุงูุจูุงูุงุช ุจูุฐุง ุงูุดูู:
```json
{
  "id": 22,
  "name": "fff",
  "phone": "0597414141",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "message": "ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ"
}
```

- ููู Flutter ูุงู ูุญุงูู ุงููุตูู ุฅูู:
```dart
userData['user']['name']  // โ ุฎุทุฃ - ูุง ููุฌุฏ ููุชุงุญ 'user'
userData['user']['id']    // โ ุฎุทุฃ
```

## โ ุงูุญู

### ุงูุชุนุฏูู ูู `aldlma/lib/auth.dart`:

**ูุจู:**
```dart
// ุญูุธ ุจูุงูุงุช ุงููุณุชุฎุฏู
_isLoggedIn = true;
_userName = userData['user']['name']; // โ ุฎุทุฃ
_phone = normalizedPhone;
_userId = userData['user']['id'];     // โ ุฎุทุฃ
```

**ุจุนุฏ:**
```dart
// ุงูุณูุฑูุฑ ูุฑุณู ุงูุจูุงูุงุช ูุจุงุดุฑุฉ (id, name, phone, token)
_isLoggedIn = true;
_userName = userData['name']; // โ ุตุญูุญ - ุงูุจูุงูุงุช ูุจุงุดุฑุฉ
_phone = normalizedPhone;
_userId = userData['id'];     // โ ุตุญูุญ
```

## ๐ ุงูุชูุงุตูู ุงููููุฉ

### ุจููุฉ ุงุณุชุฌุงุจุฉ ุงูุณูุฑูุฑ (`/login`):
```javascript
// dalma-api/index.js (ุงูุณุทุฑ 397-403)
res.json({
  id: user.id,
  name: user.name,
  phone: user.phone,
  token,
  message: 'ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ'
});
```

### ูุนุงูุฌุฉ Flutter ููุจูุงูุงุช:
```dart
// aldlma/lib/auth.dart
final userData = await ApiService.loginUser(
  phone: normalizedPhone,
  password: password.trim(),
);

// ุงูุขู ูููู ุงููุตูู ูุจุงุดุฑุฉ:
_userName = userData['name'];    // โ
_userId = userData['id'];        // โ
String token = userData['token']; // โ
```

## ๐ ุณูุฑ ุงูุนูููุฉ ุงูุตุญูุญ

### 1. ุงููุณุชุฎุฏู ูุณุฌู ุงูุฏุฎูู:
```
ุฑูู ุงูุฌูุงู: 0597414141
ูููุฉ ุงููุฑูุฑ: ********
```

### 2. Flutter ูุฑุณู ุงูุทูุจ:
```dart
POST http://localhost:3000/login
{
  "phone": "0597414141",
  "password": "********"
}
```

### 3. ุงูุณูุฑูุฑ ูุชุญูู:
```
๐ ูุญุงููุฉ ุชุณุฌูู ุฏุฎูู { phone: '0597414141' }
โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ { userId: 22, name: 'fff', phone: '0597414141' }
```

### 4. ุงูุณูุฑูุฑ ูุฑุณู ุงูุฑุฏ:
```json
{
  "id": 22,
  "name": "fff",
  "phone": "0597414141",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

### 5. Flutter ูุญูุธ ุงูุจูุงูุงุช:
```dart
_isLoggedIn = true;
_userName = "fff";
_userId = 22;
// ุญูุธ Token ูู SharedPreferences
await prefs.setString('token', userData['token']);
```

### 6. ุงููุชูุฌุฉ:
- โ ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
- โ ุงูุจูุงูุงุช ูุญููุธุฉ
- โ ุงูุชุทุจูู ุฌุงูุฒ ููุนูู

## ๐งช ููุงุฎุชุจุงุฑ ุงูุขู:

### ุงูุฎุทูุฉ 1: ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู
```bash
# ูู ุงููุญุงููุ ุงุถุบุท "r" ูู Hot Reload
# ุฃู ุฃุนุฏ ุชุดุบูู ุงูุชุทุจูู ุจุงููุงูู
```

### ุงูุฎุทูุฉ 2: ุณุฌู ุงูุฏุฎูู
```
ุฑูู ุงูุฌูุงู: 0597414141
ูููุฉ ุงููุฑูุฑ: [ูููุฉ ุงููุฑูุฑ ุงูุตุญูุญุฉ]
```

### ุงูุฎุทูุฉ 3: ุดุงูุฏ ุงููุชูุฌุฉ
- โ ุงูุณูุฑูุฑ: "โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ"
- โ ุงูุชุทุจูู: ููุชูู ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ูุจุงุดุฑุฉ
- โ ุงุณูู ูุธูุฑ ูู ุงูุชุทุจูู

## ๐ ููุงุญุธุงุช ูููุฉ

### 1. Token Authentication:
```dart
// ุงูู Token ุงูุขู ูุญููุธ ูู SharedPreferences
final prefs = await SharedPreferences.getInstance();
String? token = prefs.getString('token');
```

### 2. ููุทูุจุงุช ุงููุณุชูุจููุฉ:
```dart
// ุงุณุชุฎุฏู ุงูู Token ูู ุฑุคูุณ ุงูุทูุจุงุช
headers: {
  'Content-Type': 'application/json',
  'Authorization': 'Bearer $token',
}
```

### 3. ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู:
```dart
// ุงุณุชุฎุฏู /api/me ููุญุตูู ุนูู ุจูุงูุงุช ุงููุณุชุฎุฏู ุงููุงููุฉ
final response = await http.get(
  Uri.parse('$baseUrl/api/me'),
  headers: {
    'Authorization': 'Bearer $token',
  },
);
```

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

**ุงูุขู ุชุณุฌูู ุงูุฏุฎูู ูุนูู ุจุดูู ูุซุงูู:**
- โ ุงูุณูุฑูุฑ ููุณุฌูู ุงููุดุงุท
- โ Flutter ูุณุชูุจู ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ
- โ Token ูุญููุธ ุจุฃูุงู
- โ ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
- โ ุงูุงูุชูุงู ุงูุชููุงุฆู ููุตูุญุฉ ุงูุฑุฆูุณูุฉ

**ุฌุฑุจ ุงูุขู! ๐**

